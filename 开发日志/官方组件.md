在微信小程序（也适用于 uni-app 开发的微信小程序）中，除了 TabBar 外，还有一些组件和功能有类似的"坑"，需要使用特定的官方方案或有特殊限制：

1. **导航栏（NavigationBar）**：

   - 官方提供了自定义导航栏的能力
   - 需要在页面 json 中设置 `"navigationStyle": "custom"`
   - 自定义后需要自己处理返回逻辑、标题显示等
   - 特别注意：自定义导航栏在 iOS 上有安全区域问题

2. **下拉刷新**：

   - 只能使用官方的下拉刷新机制
   - 通过页面的 json 配置 `"enablePullDownRefresh": true`
   - 自定义下拉刷新样式很受限

3. **分享功能**：

   - 只能通过官方指定的触发方式（按钮或右上角菜单）
   - 不能随意在页面任何位置放置分享按钮
   - 需要实现特定的生命周期方法 `onShareAppMessage`

4. **WebView 组件**：

   - 有严格的域名白名单限制
   - 交互能力有限，不能完全操作 WebView 内部内容
   - 某些平台（如企业微信小程序）可能对 WebView 有额外限制

5. **登录和用户信息**：

   - 必须使用官方的登录流程和接口
   - 获取用户信息现在必须通过特定的授权流程
   - 2021 年后获取用户信息的规则变得更严格

6. **地图组件**：

   - 必须使用官方的 map 组件
   - 自定义样式和交互受限
   - 某些复杂的地图功能可能无法实现

7. **支付功能**：

   - 必须使用官方的支付 API
   - 有严格的调用流程和安全要求
   - 不能使用第三方支付方式

8. **小程序跳转**：

   - 跳转到其他小程序有配置和流程限制
   - 需要在 app.json 中配置 navigateToMiniProgramAppIdList
   - 有数量限制

9. **底部弹出菜单（ActionSheet）**：

   - 样式自定义能力有限
   - 通常只能使用官方的 API 调用

10. **背景音频播放**：

    - 必须使用官方的背景音频 API
    - 自定义播放器界面时，控制逻辑仍需使用官方 API

11. **视频组件**：

    - video 组件有特定的交互模式和限制
    - 全屏逻辑和控制器自定义受限

12. **canvas 绘图**：
    - 有新旧两套 API，新版本推荐使用 Type2d
    - 性能和功能有一定限制
    - 复杂绘图可能遇到性能问题

这些组件和功能多数是出于安全、性能或一致性的考虑，微信官方做了特定限制。在开发中，应该优先考虑使用官方提供的方案，避免走弯路。如果确实需要高度自定义，可以在官方方案的基础上做创新，而不是完全绕过官方机制。

# uni-app 组件选择指南：官方与自定义的选择

## 推荐使用官方组件/API 的场景

1. **底层导航与页面结构**：

   - TabBar：官方的 TabBar 配置（pages.json 中配置）
   - 页面导航：navigateTo, redirectTo, switchTab 等官方 API
   - 下拉刷新：官方的下拉刷新机制
   - 页面返回：官方的返回按钮和导航栏

2. **涉及系统能力的功能**：

   - 登录授权：uni.login 等官方 API
   - 支付功能：uni.requestPayment 官方 API
   - 地理位置：uni.getLocation 等位置相关 API
   - 文件系统操作：uni.saveFile 等文件操作 API

3. **设备与硬件访问**：

   - 相机/图片选择：uni.chooseImage 等官方 API
   - 蓝牙/NFC 等硬件访问：uni 官方硬件 API
   - 加速度计等传感器：uni 官方传感器 API
   - 剪贴板操作：uni.setClipboardData 等 API

4. **特殊交互组件**：

   - 地图组件：官方 map 组件
   - video/audio 播放：官方多媒体组件
   - canvas 绘图：官方 canvas 组件
   - WebView：官方 web-view 组件

5. **系统 UI 交互**：
   - 消息提示框：uni.showToast, uni.showModal 等
   - 导航栏操作：uni.setNavigationBarTitle 等
   - 下拉菜单：uni.showActionSheet
   - 键盘相关：uni.hideKeyboard 等

## 推荐使用自定义组件的场景

1. **业务逻辑组件**：

   - 商品卡片组件
   - 订单列表项
   - 用户信息卡片
   - 评价/评论组件

2. **通用 UI 组件**：

   - 按钮：自定义样式更丰富的按钮
   - 输入框：带有特殊交互的输入框
   - 选择器：自定义的级联选择、日期选择等
   - 加载状态：自定义的加载动画

3. **布局组件**：

   - 栅格系统
   - flex 布局封装
   - 自适应容器
   - 等分行/列

4. **特色交互组件**：

   - 侧滑菜单
   - 自定义下拉列表
   - 可拖动排序列表
   - 特效轮播图
   - 骨架屏

5. **定制样式的基础元素**：

   - 特殊样式的开关
   - 定制化的单选/多选
   - 自定义进度条
   - 特殊形状的标签

6. **复合功能组件**：

   - 地址选择器
   - 文件上传组件
   - 富文本编辑器
   - 图片裁剪工具

7. **特殊场景组件**：
   - 虚拟列表
   - 下拉刷新容器（在官方下拉刷新基础上增强）
   - 可缩放图片查看器
   - 自定义日历

## 混合使用策略（官方+自定义）

1. **TabBar 特殊定制**：

   - 基于官方 TabBar 配置（确保基础导航功能）
   - 通过 custom 属性使用自定义组件实现特殊样式

2. **导航栏自定义**：

   - 设置 navigationStyle: custom
   - 自行实现导航栏，但保留基本的返回功能

3. **增强型地图**：

   - 使用官方 map 组件作为基础
   - 在地图上叠加自定义 UI 和交互组件

4. **复杂列表与下拉刷新**：

   - 使用官方的下拉刷新机制
   - 自定义列表项和加载更多的视觉效果

5. **增强型表单**：
   - 使用官方表单组件作为基础
   - 添加自定义验证、交互和样式

## 选择原则

1. **兼容性优先**：

   - 涉及平台底层能力时，优先使用官方组件/API
   - 跨平台兼容性要求高的场景优先考虑官方

2. **性能考量**：

   - 列表等高频组件优先使用官方或优化过的自定义组件
   - 避免过度使用复杂的自定义组件导致性能问题

3. **UI 一致性**：

   - 整体设计风格统一的场景下，使用自定义组件库
   - 特殊交互和效果需求使用自定义组件

4. **开发效率**：
   - 简单场景用官方组件快速开发
   - 复杂但常见的 UI 模式使用成熟的自定义组件

使用这个指南可以帮助你在开发中做出更明智的选择，既充分利用官方组件的兼容性和性能优势，又能通过自定义组件实现差异化的用户体验和交互效果。
